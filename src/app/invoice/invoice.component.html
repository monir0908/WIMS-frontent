<block-ui>

  <div class="container">
    <div class="card" *ngIf="details">
      <!-- <div class="row invoice-contact">
        <div class="col-md-8">
          <div class="invoice-box row">
            <div class="col-sm-12">
              <table class="table table-responsive invoice-table table-borderless">
                <tbody>
                  <tr>
                    <td><img src="assets/images/logo-blue.png" class="m-b-10" alt=""></td>
                  </tr>
                  <tr>
                    <td>Phoenixcoded</td>
                  </tr>
                  <tr>
                    <td>208, Paris Point, Varachha Road,
                      Surat. (1234) - 567891</td>
                  </tr>
                  <tr>
                    <td><a href="http://html.phoenixcoded.net/cdn-cgi/l/email-protection#d8bcbdb5b798bfb5b9b1b4f6bbb7b5"
                        target="_top"><span class="__cf_email__"
                          data-cfemail="c4a0a1a9ab84a3a9a5ada8eaa7aba9">[email&#160;protected]</span></a>
                    </td>
                  </tr>
                  <tr>
                    <td>+91 919-91-91-919</td>
                  </tr>

                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="row text-center">
            <div class="col-sm-12 invoice-btn-group">
              <button type="button" class="btn btn-primary btn-print-invoice waves-effect waves-light m-r-20"> <i class="icofont icofont-printer"></i> Print
                Invoice
              </button>
              <button type="button" (click)="location.back()" class="btn btn-info waves-effect waves-light"> <i class="icofont icofont-arrow-left"></i> Back
              </button>
            </div>
          </div>
        </div>
      </div> -->
      <div class="card-block">
        <div class="row invoive-info mb-0">
          <div class="col-md-4 col-xs-12 invoice-client-info mb-5" *ngIf="customerObj">
            <h6>Customer Information :</h6>
            <h5 class="m-0">{{customerObj.first_name}} {{customerObj.last_name}}</h5>
            <h6 class="text-primary font-weight-bold pt-2">Balance : {{balance - tempPaidAmount}} </h6>
          </div>
          <div class="col-md-4 col-xs-12 offset-md-4">
            <div class="row float-right mr-1">
              <div class="col-12">
                <h6>Bill Information :</h6>
                <table class="table table-responsive invoice-table invoice-order table-borderless">
                  <tbody>
                    <tr>
                      <th>Bill Id : {{details.bill.id}}</th>
                    </tr>
                    <tr *ngIf="details.bill.bill_type == 'Subscription'">
                      <th>Session :</th>
                      <td>{{details.bill.session}}</td>
                    </tr>
                    <!-- <tr>
                      <th>Status :</th>
                      <td>
                        <span class="label label-warning">Pending</span>
                      </td>
                    </tr> -->

                  </tbody>
                </table>
              </div>
            </div>

          </div>

        </div>

        <div class="row" *ngIf="details.bill.bill_type == 'Subscription'">
          <div class="col-sm-12">
            <div class="table-responsive">
              <table class="table  invoice-detail-table">
                <thead>
                  <tr class="thead-default">
                    <th width="5%">#SL</th>
                    <th width="15%">SIM CID No</th>
                    <th width="20%">SIM ICCID No</th>
                    <th width="15%">Phone Number</th>
                    <th width="15%">Plan</th>
                    <th width="15%">Amount</th>
                    <th width="15%">Discount</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of details.bill_items; let i = index">
                    <td>{{i+1}}</td>
                    <td>{{item.sim.CID_no}}</td>
                    <td>{{item.sim.ICCID_no}}</td>
                    <td>{{item.sim.phone_number}}</td>
                    <td>{{item.plan.plan}}</td>
                    <td>{{item.plan.plan_unit_price}}</td>
                    <td>{{item.plan.plan_unit_price - item.amount}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div class="row" *ngIf="details.bill.bill_type == 'Device Sales'">
          <div class="col-sm-12">
            <div class="table-responsive">
              <table class="table  invoice-detail-table">
                <thead>
                  <tr class="thead-default">
                    <th width="5%">#SL</th>
                    <th width="15%">DID No</th>
                    <th width="25%">IMEI</th>
                    <th width="20%" class="text-right">Amount</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of details.bill_items; let i = index">
                    <td>{{i+1}}</td>
                    <td>{{item.device.DID_no}}</td>
                    <td>{{item.device.IMEI}}</td>
                    <td class="text-right">{{item.device_cost}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-12">
            <table class="table table-responsive invoice-table invoice-total">
              <tbody>
                <tr *ngIf="details.bill.bill_type == 'Device Sales'">
                  <th>One Time Charge :</th>
                  <td>{{details.bill.one_time_charge}}</td>
                </tr>
                <tr>
                  <th>Sub Total :</th>
                  <td>{{details.bill.total_amount}}</td>
                </tr>
                <tr>
                  <th>Discount (-):</th>
                  <td>{{details.bill.discount}}</td>
                </tr>
                <tr class="text-info">
                  <td>
                    <hr />
                    <h6 class="font-weight-bold">Payable Amount :</h6>
                  </td>
                  <td>
                    <hr />
                    <h6 class="font-weight-bold">{{details.bill.payable_amount}}</h6>
                  </td>
                </tr>

                <tr *ngIf="isPayBalanceEnableShow">
                  <th colspan="2">
                    <div class="form-group text-right mt-2">
                      <div class="checkbox-fade fade-in-primary">
                        <label>
                          <input type="checkbox" (change)="onChangePayBalance($event.target.checked)">
                          <span class="cr">
                            <i class="cr-icon icofont icofont-ui-check txt-primary"></i>
                          </span> Pay From Balance ?
                        </label>
                      </div>
                    </div>
                  </th>
                </tr>

                <tr class="text-success">
                  <th>
                    <h5 class="text-primary pt-2">Paid Amount :</h5>
                  </th>
                  <td class="pr-1">
                    <input [disabled]="isPayBalanceEnable" type="text" class="form-control text-right pr-3" numeric
                      numericType="number" (keyup)="onChangePaid(paidAmount)" [(ngModel)]="paidAmount" (focus)="inputFocused($event)"
                      [ngModelOptions]="{standalone: true}">
                  </td>
                </tr>

                <tr>
                  <th>
                    <h5 class="text-primary pt-2">Remarks :</h5>
                  </th>
                  <td class="pr-1">
                    <textarea rows="2" type="text" [(ngModel)]="remarks" class="form-control"> </textarea>
                  </td>
                </tr>

                <tr>
                  <th colspan="2">
                    <div class="row float-right mt-3">
                      <button type="button" (click)="location.back()" class="btn btn-info waves-effect waves-light mr-2"> <i class="icofont icofont-arrow-left"></i> Back
                      </button>
                        <button (click)="onFormSubmitBill()" type="button" class="btn btn-primary btn-print-invoice waves-effect waves-light m-r-20">  Receive Payment
                        </button>


                    </div>
                  </th>
                </tr>


              </tbody>
            </table>
          </div>
        </div>

        <!-- <div class="row">
          <div class="col-sm-12">
            <h6>Terms And Condition :</h6>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing
              elit, sed do eiusmod tempor incididunt ut labore et
              dolore magna aliqua. Ut enim ad minim veniam, quis
              nostrud exercitation ullamco laboris nisi ut aliquip
              ex ea commodo consequat. Duis aute irure dolor </p>
          </div>
        </div> -->
      </div>
    </div>
  </div>
  <!-- <ng-template #templateGenerateBill>
        <div class="modal-header ">
            <h4 class="modal-title pull-left " [innerHtml]="modalTitle" id="modalTitle"></h4>
            <button type="button " class="close pull-right " aria-label="Close " (click)="modalHide()">
                <i class="icofont icofont-close"></i>
            </button>
        </div>
        <div class="modal-body pb-0">
            <app-card>
                <form [formGroup]="entryFormBill">

                    <div class="form-group row">
                      <label class="col-sm-4 col-form-label">Invoice Month </label>
                      <div class="col-sm-8">
                        <input type="text" formControlName="invoice_month" class="form-control"  [ngClass]="{ 'is-invalid': submitted && f.invoice_month.errors }" placeholder="Type invoice month">
                        <div *ngIf="submitted && f.invoice_month.errors" class="error-text">
                          <span *ngIf="f.invoice_month.errors.required" class="text-danger"> Invoice month is required</span>

                      </div>
                      </div>
                    </div>

                  </form>

            </app-card>
        </div>
        <div class="modal-footer">
            <div class="pr-4">
                <button class="btn btn-danger btn-sm btn-outline-danger mr-2" (click)="modalHide()"> <i
                        class="icofont icofont-close"></i> Close</button>

                <button class="btn btn-success btn-sm btn-outline-success" (click)="onFormSubmitBill()"><i
                        class="icofont icofont-check-circled"></i> {{btnSaveText}}</button>
            </div>

        </div>
    </ng-template> -->

</block-ui>
